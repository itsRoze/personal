---
import { cn } from "@/utils/cn";
import roseImg from "../../images/rose.svg";
import Drawer from "./Drawer.astro";

const links = [
  { name: "Home", href: "/" },
  { name: "Projects", href: "/projects" },
  { name: "Publications", href: "/publications" },
  { name: "Blog", href: "/blog" },
  { name: "RSS", href: "/rss.xml" },
];

const currentPath = Astro.url.pathname;
---

<nav class="lg:hidden">
  <Drawer links={links} />
</nav>

<nav class="hidden lg:grid grid-cols-[auto_1fr_auto] items-center text-lg 2xl:text-xl">
<!-- Left: logo -->
  <div class="justify-self-start">
    <a href="/" class="inline-flex items-center">
      <img src={roseImg.src} alt="Rose flower" class="w-4 xl:w-6 h-auto" />
    </a>
  </div>
<!-- Center: links (truly centered) -->
  <div class="justify-self-center">
    <div class="flex gap-4 2xl:gap-7 items-center">
      {
        links.map((link) => (
          <a
            href={link.href}
            target={link.name === "RSS" ? "_blank" : "_self"}
            class={cn(
              "group transition duration-300 hover:underline underline-offset-[8px]",
              {
                "underline underline-offset-[8px]":
                  currentPath.includes(link.href) && link.href !== "/",
              }
            )}
          >
            {link.name}
            <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-1" />
          </a>
        ))
      }
    </div>
  </div>

  <!-- Right: spacer to balance logo width -->
  <div class="justify-self-end">
    <!-- Match logo width so center stays centered -->
    <div class="w-4 xl:w-6" aria-hidden="true"></div>
  </div>
</nav>
